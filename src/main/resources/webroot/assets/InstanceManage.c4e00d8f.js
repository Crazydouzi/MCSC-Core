import{o as ne,$ as x,D as j,i as oe,V as re,E as H}from"./VAvatar.540c951f.js";import{g as G,a as B,e as L,V as I,c as P,f as k,b as ie,l as se}from"./VSpacer.34de78e0.js";import{a as T,V as S,b as de,c as E}from"./VList.2e30d169.js";import{V as fe}from"./VContainer.5fe4f2fe.js";import{V as me,a as ce}from"./VSelect.f00e70c4.js";import{V as h}from"./VTextField.20ab6830.js";import{g as Y,s as ve,t as Q,a as e,d as z,ac as Z,q as ee,aH as ge,o as y,b as w,w as l,ax as N,ay as le,x as s,F as te,e as c,af as F,u as pe,r as $,I as Ve,i as J,c as Ce,m as W,v as _e,Q as D,ae as q,y as Se}from"./index.9753a940.js";import{e as be,g as b}from"./forwardRefs.cd29eeea.js";import{m as Me,u as Fe,b as K,V as ye}from"./VOverlay.1580b0c3.js";import{u as ae}from"./tag.9461cb4b.js";import{V as O,b as U}from"./VToolbar.ea7f237a.js";import{V as Ae}from"./VChip.5e379713.js";/* empty css              */const De=Y()({name:"VToolbarItems",props:ne({variant:"text"}),setup(V,_){let{slots:d}=_;return ve({VBtn:{color:Q(V,"color"),height:"inherit",variant:Q(V,"variant")}}),ae(()=>{var a;return e("div",{class:"v-toolbar-items"},[(a=d.default)==null?void 0:a.call(d)])}),{}}}),Ee={key:0},xe={key:1},Be=z({__name:"ConfigEdit",props:["config","serverId"],setup(V){const _=V;let d=Z({config:{},translate:{}}),a={id:_.serverId,fileName:_.config};function g(){x.request(j.getConfig,a).then(o=>{d.config=p(o.data.config),d.translate=p(o.data.translate)})}function p(o){const n={},r=u=>Object.keys(u).length===0,f=(u,m)=>{Object(u)!==u?(u=="true"?u=!0:u=="false"&&(u=!1),n[m]=u):Array.isArray(u)?n[m]=u:r(u)?n[m]="{}":Object.keys(u).forEach(C=>f(u[C],m?`${m}.${C}`:C))};return f(o,""),n}function A(o){if(Object(o)!==o||Array.isArray(o))return o;const n=/\.?([^.\[\]]+)$|\[(\d+)\]$/,r=Object.keys(o);let f,u;for(;u=r.shift();){const m=n.exec(u);let C;if(m.index){const M=u.slice(0,m.index);M in o||(o[M]=m[2]?[]:{},r.push(M)),C=o[M]}else f||(f=m[2]?[]:{}),C=f;/^{.*}/.test(o[u])?C[m[2]||m[1]]=JSON.parse(o[u]):C[m[2]||m[1]]=o[u]}return f}return ee(()=>{g()}),ge(()=>{console.log(A(Object.assign(d.config,{})))}),(o,n)=>(y(),w(fe,{fluid:!0},{default:l(()=>[e(B,{width:"100%"},{default:l(()=>[e(G,null,{default:l(()=>[e(T,{width:"100%"},{default:l(()=>[(y(!0),N(te,null,le(s(d).config,(r,f)=>(y(),w(S,{key:f},{default:l(()=>[e(L,{align:"center"},{default:l(()=>[e(I,{"justify-start":"",cols:"12",xl:"4",lg:"4",md:"4"},{default:l(()=>[c(F(f),1)]),_:2},1024),e(I,{"justify-center":"",cols:"12",xl:"4",lg:"4",md:"4"},{default:l(()=>[c(F(s(d).translate[f]),1)]),_:2},1024),e(I,{"justify-end":"",cols:"12",xl:"4",lg:"4",md:"4"},{default:l(()=>[typeof r=="boolean"?(y(),N("div",Ee,[e(me,{items:[{title:"true",value:!0},{title:"false",value:!1}],modelValue:s(d).config[f],"onUpdate:modelValue":u=>s(d).config[f]=u,variant:"underlined"},null,8,["modelValue","onUpdate:modelValue"])])):(y(),N("div",xe,[e(h,{modelValue:s(d).config[f],"onUpdate:modelValue":u=>s(d).config[f]=u,variant:"underlined"},null,8,["modelValue","onUpdate:modelValue"])]))]),_:2},1024)]),_:2},1024),e(de,{class:"border-opacity-40"})]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}});const ue=Y()({name:"VDialog",props:{fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Me({origin:"center center",scrollStrategy:"block",transition:{component:ce},zIndex:2400})},emits:{"update:modelValue":V=>!0},setup(V,_){let{slots:d}=_;const a=pe(V,"modelValue"),{scopeId:g}=Fe(),p=$();function A(n){var u,m;const r=n.relatedTarget,f=n.target;if(r!==f&&((u=p.value)==null?void 0:u.contentEl)&&((m=p.value)==null?void 0:m.globalTop)&&![document,p.value.contentEl].includes(f)&&!p.value.contentEl.contains(f)){const C=[...p.value.contentEl.querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])')].filter(v=>!v.hasAttribute("disabled")&&!v.matches('[tabindex="-1"]'));if(!C.length)return;const M=C[0],R=C[C.length-1];r===M?R.focus():M.focus()}}Ve&&J(()=>a.value&&V.retainFocus,n=>{n?document.addEventListener("focusin",A):document.removeEventListener("focusin",A)},{immediate:!0}),J(a,async n=>{var r,f;await _e(),n?(r=p.value.contentEl)==null||r.focus({preventScroll:!0}):(f=p.value.activatorEl)==null||f.focus({preventScroll:!0})});const o=Ce(()=>W({"aria-haspopup":"dialog","aria-expanded":String(a.value)},V.activatorProps));return ae(()=>{const[n]=K.filterProps(V);return e(K,W({ref:p,class:["v-dialog",{"v-dialog--fullscreen":V.fullscreen,"v-dialog--scrollable":V.scrollable}]},n,{modelValue:a.value,"onUpdate:modelValue":r=>a.value=r,"aria-modal":"true",activatorProps:o.value,role:"dialog"},g),{activator:d.activator,default:function(){for(var r=arguments.length,f=new Array(r),u=0;u<r;u++)f[u]=arguments[u];return e(oe,{root:!0},{default:()=>{var m;return[(m=d.default)==null?void 0:m.call(d,...f)]}})}})}),be({},p)}}),X=z({__name:"Confirm",props:["dialogStatus","dialogMsg"],emits:["action-save","action-cancel","update:dialogStatus"],setup(V,{emit:_}){const d=V;let a=$(d.dialogStatus),g=$(d.dialogMsg==null?"\u8BF7\u786E\u8BA4\u64CD\u4F5C":d.dialogMsg);function p(){_("action-save")}function A(){a.value=!1,_("update:dialogStatus",!1)}return J(d,(o,n)=>{a.value=o.dialogStatus,g.value=o.dialogMsg==null?"\u8BF7\u786E\u8BA4\u64CD\u4F5C":o.dialogMsg}),(o,n)=>(y(),w(ue,{modelValue:s(a),"onUpdate:modelValue":n[2]||(n[2]=r=>D(a)?a.value=r:a=r),"hide-overlay":"",persistent:"",width:"300"},{default:l(()=>[e(B,{dark:""},{default:l(()=>[e(P,null,{default:l(()=>[c(F(s(g)),1)]),_:1}),e(G,null,{default:l(()=>[e(k),e(b,{color:"green",onClick:n[0]||(n[0]=r=>p())},{default:l(()=>[c("\u786E\u8BA4")]),_:1}),e(b,{color:"red",onClick:n[1]||(n[1]=r=>A())},{default:l(()=>[c("\u53D6\u6D88")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Ie=q("h3",{style:{display:"inline"}},"\u63D2\u4EF6\u7BA1\u7406\uFF1A",-1),$e=q("h3",{style:{display:"inline"}},"\u4FEE\u6539\u542F\u7528\u72B6\u6001\uFF1A",-1),qe=q("h3",{style:{display:"inline"}},"\u5220\u9664\u670D\u52A1\u5668\uFF1A",-1),he={class:"float-right"},Qe=z({__name:"InstanceManage",setup(V){const _={required:v=>v?!0:"\u6B64\u9879\u4E0D\u80FD\u4E3A\u7A7A"},d=Se();let a=Z({MCSetting:{serverId:void 0,javaVersion:"java",memMin:"1G",memMax:"2G",VMOptions:void 0,jarName:void 0},MCServer:{id:void 0,serverName:void 0,version:void 0,enable:void 0},MCConfig:[{fileName:void 0,description:void 0}]}),g=$(!1),p=$("");function A(v){g.value=!0,p.value=v}const o=d.currentRoute.value.params.id[0];a.MCServer.id=o,a.MCSetting.serverId=o;let n=$(!1),r=$(!1);function f(){let v={id:o};x.request(j.getConfigList,v).then(t=>{a.MCConfig=t.data})}function u(){let v={serverId:o};x.request(j.getSetting,v).then(t=>{a.MCSetting=t.data})}function m(){let v={id:o};x.request(j.getServerInfo,v).then(t=>{Object.keys(t.data).length===0&&d.push({name:"Server"}),a.MCServer=t.data})}function C(){let v={id:o};x.request(H.changeVersion,v).then(t=>{t.code=="200"&&m(),alert(t.msg)})}function M(){x.request(j.modifyServerConfig,a.MCSetting).then(v=>{console.log(v),alert(v.data)}).finally(()=>{m(),n.value=!1})}function R(){let v={id:o};x.request(H.deleteServer,v).then(t=>{alert(t.msg),t.code==200&&d.push({name:"Server"})})}return ee(()=>{f(),u(),m()}),(v,t)=>(y(),N("div",null,[e(L,null,{default:l(()=>[e(I,{md:"6",lg:"6",xl:"6",cols:"12",sm:"12"},{default:l(()=>[e(B,{height:"100%"},{default:l(()=>[e(O,{density:"compact",color:"red"},{default:l(()=>[e(U,null,{default:l(()=>[c("\u57FA\u672C\u4FE1\u606F")]),_:1}),e(k)]),_:1}),e(P,null,{default:l(()=>[e(T,null,{default:l(()=>[e(S,null,{default:l(()=>[q("h3",null,[c(" \u670D\u52A1\u5668\u540D\uFF1A"+F(s(a).MCServer.serverName)+" ",1),e(Ae,{class:"ma-2",color:s(a).MCServer.enable?"green":"red",variant:"outlined",density:"comfortable",label:""},{default:l(()=>[c(F(s(a).MCServer.enable?"\u53EF\u7528":"\u505C\u7528"),1)]),_:1},8,["color"])])]),_:1}),e(S,null,{default:l(()=>[q("h3",null,"\u670D\u52A1\u5668\u7248\u672C\uFF1A"+F(s(a).MCServer.version),1)]),_:1}),e(S,null,{default:l(()=>[e(E),Ie,e(b,{color:"blue-darken-4",variant:"plain",label:"",onClick:t[0]||(t[0]=i=>v.$router.push({name:"PluginsManage"}))},{default:l(()=>[c(" >>\u8FDB\u5165\u7BA1\u7406\u9875 ")]),_:1})]),_:1}),e(S,null,{default:l(()=>[$e,e(b,{color:"green",disabled:s(a).MCServer.enable,label:"",onClick:t[1]||(t[1]=i=>C())},{default:l(()=>[c(" \u542F\u7528 ")]),_:1},8,["disabled"])]),_:1}),e(S,null,{default:l(()=>[e(E),qe,e(b,{color:"red",onClick:t[2]||(t[2]=i=>D(r)?r.value=!0:r=!0)},{default:l(()=>[c(" \u5220\u9664 ")]),_:1}),e(X,{"dialog-status":s(r),"onUpdate:dialogStatus":t[3]||(t[3]=i=>D(r)?r.value=i:r=i),onActionSave:t[4]||(t[4]=i=>R())},null,8,["dialog-status"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(I,null,{default:l(()=>[e(B,null,{default:l(()=>[e(O,{density:"compact",color:"red"},{default:l(()=>[e(U,null,{default:l(()=>[c("\u57FA\u7840\u53C2\u6570\u914D\u7F6E")]),_:1}),e(k)]),_:1}),e(P,null,{default:l(()=>[e(ye,null,{default:l(()=>[e(T,null,{default:l(()=>[e(S,null,{default:l(()=>[e(E,null,{default:l(()=>[c("Core\u5305\u540D")]),_:1}),e(h,{counter:10,label:"CoreFileName",required:"",variant:"underlined",modelValue:s(a).MCSetting.jarName,"onUpdate:modelValue":t[5]||(t[5]=i=>s(a).MCSetting.jarName=i),rules:[_.required]},null,8,["modelValue","rules"])]),_:1}),e(S,null,{default:l(()=>[e(E,null,{default:l(()=>[c("\u5185\u5B58\u5206\u914D")]),_:1}),e(L,null,{default:l(()=>[e(I,null,{default:l(()=>[e(h,{label:"\u6700\u5C0F\u503C",required:"",variant:"underlined",modelValue:s(a).MCSetting.memMin,"onUpdate:modelValue":t[6]||(t[6]=i=>s(a).MCSetting.memMin=i),rules:[_.required]},null,8,["modelValue","rules"])]),_:1}),e(I,null,{default:l(()=>[e(h,{label:"\u6700\u5927\u503C",required:"",variant:"underlined",modelValue:s(a).MCSetting.memMax,"onUpdate:modelValue":t[7]||(t[7]=i=>s(a).MCSetting.memMax=i),rules:[_.required]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(S,null,{default:l(()=>[e(E,null,{default:l(()=>[c("Java\u8DEF\u5F84")]),_:1}),e(h,{counter:10,label:"JavaVersion",required:"",variant:"underlined",modelValue:s(a).MCSetting.javaVersion,"onUpdate:modelValue":t[8]||(t[8]=i=>s(a).MCSetting.javaVersion=i),rules:[_.required]},null,8,["modelValue","rules"])]),_:1}),e(S,null,{default:l(()=>[e(E,null,{default:l(()=>[c("\u542F\u52A8\u53C2\u6570\u8BBE\u7F6E")]),_:1}),e(h,{counter:10,label:"VMOptions",variant:"underlined",modelValue:s(a).MCSetting.VMOptions,"onUpdate:modelValue":t[9]||(t[9]=i=>s(a).MCSetting.VMOptions=i)},null,8,["modelValue"])]),_:1}),e(S,null,{default:l(()=>[q("div",he,[e(b,{color:"blue",class:"mr-5",onClick:t[10]||(t[10]=i=>D(n)?n.value=!0:n=!0)},{default:l(()=>[c("\u4FDD\u5B58")]),_:1}),e(b,{color:"red"},{default:l(()=>[c("\u6E05\u7A7A")]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(X,{"dialog-status":s(n),"onUpdate:dialogStatus":t[11]||(t[11]=i=>D(n)?n.value=i:n=i),onActionSave:t[12]||(t[12]=i=>M())},null,8,["dialog-status"])]),_:1})]),_:1}),e(B,{class:"mt-5"},{default:l(()=>[e(O,{density:"compact",color:"red"},{default:l(()=>[e(U,null,{default:l(()=>[c("\u7279\u5B9A\u914D\u7F6E")]),_:1}),e(k)]),_:1}),e(P,null,{default:l(()=>[e(T,null,{default:l(()=>[(y(!0),N(te,null,le(s(a).MCConfig,i=>(y(),w(S,null,{default:l(()=>[e(E,null,{default:l(()=>[e(B,null,{default:l(()=>[e(ie,null,{default:l(()=>[q("h4",null,F(i.fileName),1)]),_:2},1024),e(se,null,{default:l(()=>[c(F(i.description),1)]),_:2},1024),e(G,null,{default:l(()=>[e(b,{onClick:je=>A(i.fileName)},{default:l(()=>[c(">\u7F16\u8F91")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1}),e(ue,{modelValue:s(g),"onUpdate:modelValue":t[15]||(t[15]=i=>D(g)?g.value=i:g=i),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition"},{default:l(()=>[e(B,null,{default:l(()=>[e(O,{dark:"",color:"primary"},{default:l(()=>[e(b,{icon:"",dark:"",onClick:t[13]||(t[13]=i=>D(g)?g.value=!1:g=!1)},{default:l(()=>[e(re,null,{default:l(()=>[c("mdi-close")]),_:1})]),_:1}),e(U,null,{default:l(()=>[c(F(s(p)),1)]),_:1}),e(k),e(De,null,{default:l(()=>[e(b,{variant:"text",onClick:t[14]||(t[14]=i=>D(g)?g.value=!1:g=!1)},{default:l(()=>[c(" Save ")]),_:1})]),_:1})]),_:1}),e(Be,{config:s(p),serverId:v.$route.params.id},null,8,["config","serverId"])]),_:1})]),_:1},8,["modelValue"])]))}});export{Qe as default};
