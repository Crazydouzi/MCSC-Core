import{$ as B,E as N,D as O}from"./VAvatar.540c951f.js";import{V as K}from"./VContainer.5fe4f2fe.js";import{a as G,V as p,c as b,b as h}from"./VList.2e30d169.js";import{V as c}from"./VTextField.20ab6830.js";import{V as $}from"./VSelect.f00e70c4.js";import{e as y,V as _,f as U,c as ee,a as T,g as le}from"./VSpacer.34de78e0.js";import{V as X}from"./VFileInput.1ef25f52.js";import{d as J,ac as I,r as q,q as P,o as A,b as x,w as l,e as s,af as w,x as u,a as e,Q as j,au as Y,ae as S,M as ue,O as ae,av as te,aw as ne,h as re,j as oe,ax as R,A as de,F as se,ay as ie}from"./index.9753a940.js";import{g as E}from"./forwardRefs.cd29eeea.js";import{V as Z}from"./VOverlay.1580b0c3.js";import{a as me}from"./tag.9461cb4b.js";import{V as z,b as Q}from"./VToolbar.ea7f237a.js";import{V as H}from"./VChip.5e379713.js";/* empty css              */const fe=S("h3",{class:"my-3"},"\u57FA\u672C\u914D\u7F6E",-1),ve=S("h3",{class:"my-3"},"\u7248\u672C\u914D\u7F6E",-1),Ve=S("h3",{class:"my-3"},"\u53C2\u6570\u914D\u7F6E",-1),pe=J({__name:"AddInstance",emits:["close","getServerList"],setup(W,{emit:g}){let d=I({javaVersion:"java",memMin:"1G",memMax:"2G",VMOptions:void 0,jarName:void 0,serverId:void 0}),m=I({serverName:void 0,version:void 0,enable:!1,id:""}),f=I({from:"paper",version:"",buildCode:"",coreName:""}),C=q(),v=q(),M=q([]),F=q(),D={url:"https://api.papermc.io/v2/projects/paper",method:"GET",headers:{accept:"application/json"},credentials:"omit"},r=q();const n={required:o=>o?!0:"\u6B64\u9879\u4E0D\u80FD\u4E3A\u7A7A"};function k(){g("close")}function L(){const o=Object.assign({},D);B.request(o).then(a=>{M.value=a.versions,F.value=M.value.at(-1)})}async function i(){f.version=F.value;let o=Object.assign({},D);o.url=o.url+"/versions/"+F.value,await B.request(o).then(a=>{f.buildCode=a.builds.pop()}).then(async()=>{o.url=o.url+"/builds/"+f.buildCode,await B.request(o).then(a=>{f.coreName=a.downloads.application.name})})}async function V(){const{valid:o}=await C.value.validate();if(v.value=o,v.value)if(f.from=="\u7528\u6237\u4E0A\u4F20"){let a={file:r.value[0],MCServer:m,MCSetting:d};console.log(a),B.request(N.mcServerUpload,a).then(t=>{alert(t.data)}).catch(t=>{alert(t.msg)}).finally(()=>{k(),g("getServerList")})}else i().then(()=>{console.log("\u5B8C\u6210"),m.version=F.value;let a={MCServer:m,MCSetting:d,versionInfo:f};B.request(N.installRemoteMCServer,a).then(t=>{alert(t.data)}).finally(()=>{g("getServerList")}),alert("\u5B9E\u4F8B\u90E8\u7F72\u4E2D\u3002\u3002\u3002\u3002\u64CD\u4F5C\u5C06\u5728\u4E00\u6BB5\u65F6\u95F4\u540E\u5B8C\u6210\u3002\u3002"),k()})}return P(()=>{L()}),(o,a)=>(A(),x(Z,{"fast-fail":!0,modelValue:u(v),"onUpdate:modelValue":a[10]||(a[10]=t=>j(v)?v.value=t:v=t),ref_key:"form",ref:C},{default:l(()=>[s(w(u(v))+" ",1),e(K,{class:"fill-height",fluid:""},{default:l(()=>[e(G,{style:{width:"100%"}},{default:l(()=>[fe,e(p,null,{default:l(()=>[e(b,null,{default:l(()=>[s("\u670D\u52A1\u5668\u540D")]),_:1}),e(c,{counter:10,label:"\u670D\u52A1\u5668\u540D",required:"",variant:"underlined",rules:[n.required],"validate-on":"blur",autofocus:!0,modelValue:u(m).serverName,"onUpdate:modelValue":a[0]||(a[0]=t=>u(m).serverName=t)},null,8,["rules","modelValue"])]),_:1}),ve,e(p,null,{default:l(()=>[e(b,null,{default:l(()=>[s("\u8BF7\u9009\u62E9CORE\u5305\u6765\u6E90")]),_:1}),e($,{items:["paper","\u7528\u6237\u4E0A\u4F20"],modelValue:u(f).from,"onUpdate:modelValue":a[1]||(a[1]=t=>u(f).from=t),change:"alert",variant:"underlined",rules:[n.required]},null,8,["modelValue","rules"])]),_:1}),u(f).from=="paper"?(A(),x(p,{key:0},{default:l(()=>[e(b,null,{default:l(()=>[s("\u8BF7\u9009\u62E9\u7248\u672C")]),_:1}),e($,{items:u(M),modelValue:u(F),"onUpdate:modelValue":a[2]||(a[2]=t=>j(F)?F.value=t:F=t),change:"alert",variant:"underlined",rules:[n.required]},null,8,["items","modelValue","rules"])]),_:1})):u(f).from==="\u7528\u6237\u4E0A\u4F20"?(A(),x(p,{key:1},{default:l(()=>[e(b,null,{default:l(()=>[s("\u8BF7\u9009\u62E9\u670D\u52A1\u5668\u7C7B\u578B")]),_:1}),e($,{items:["paper","forge"],change:"alert",variant:"underlined",rules:[n.required]},null,8,["rules"]),e(y,null,{default:l(()=>[e(_,null,{default:l(()=>[e(X,{label:"\u8BF7\u9009\u62E9Core",required:"",variant:"underlined",rules:[n.required],accept:".jar",modelValue:u(r),"onUpdate:modelValue":a[3]||(a[3]=t=>j(r)?r.value=t:r=t)},null,8,["rules","modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(c,{label:"\u7248\u672C",required:"",variant:"underlined",modelValue:u(m).version,"onUpdate:modelValue":a[4]||(a[4]=t=>u(m).version=t),rules:[n.required]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})):Y("",!0),e(h,{color:"black"}),Ve,e(p,null,{default:l(()=>[e(b,null,{default:l(()=>[s("Java\u8DEF\u5F84")]),_:1}),e(c,{counter:10,label:"JavaVersion",required:"",variant:"underlined",modelValue:u(d).javaVersion,"onUpdate:modelValue":a[5]||(a[5]=t=>u(d).javaVersion=t),rules:[n.required]},null,8,["modelValue","rules"])]),_:1}),e(p,null,{default:l(()=>[e(b,null,{default:l(()=>[s("\u5185\u5B58\u5206\u914D")]),_:1}),e(y,null,{default:l(()=>[e(_,null,{default:l(()=>[e(c,{label:"\u6700\u5C0F\u503C",required:"",variant:"underlined",modelValue:u(d).memMin,"onUpdate:modelValue":a[6]||(a[6]=t=>u(d).memMin=t),rules:[n.required]},null,8,["modelValue","rules"])]),_:1}),e(_,null,{default:l(()=>[e(c,{label:"\u6700\u5927\u503C",required:"",variant:"underlined",modelValue:u(d).memMax,"onUpdate:modelValue":a[7]||(a[7]=t=>u(d).memMax=t),rules:[n.required]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(b,null,{default:l(()=>[s("\u542F\u52A8\u53C2\u6570\u8BBE\u7F6E")]),_:1}),e(c,{counter:10,label:"VMOptions",variant:"underlined",modelValue:u(d).VMOptions,"onUpdate:modelValue":a[8]||(a[8]=t=>u(d).VMOptions=t)},null,8,["modelValue"])]),_:1}),e(p,null,{default:l(()=>[e(y,null,{default:l(()=>[e(_,null,{default:l(()=>[e(U),e(E,{color:"blue",class:"float-right",onClick:a[9]||(a[9]=t=>V())},{default:l(()=>[s("\u4FDD\u5B58")]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(E,{color:"red",onClick:k},{default:l(()=>[s("\u53D6\u6D88")]),_:1}),e(U)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),_e=S("h3",{class:"my-3"},"\u57FA\u672C\u914D\u7F6E",-1),Ce=S("h3",{class:"my-3"},"\u6574\u5408\u5305\u6587\u4EF6",-1),Fe=S("h3",{class:"my-3"},"\u53C2\u6570\u914D\u7F6E",-1),ce=J({__name:"UploadInstance",emits:["close","getServerList"],setup(W,{emit:g}){let d=I({javaVersion:"java",memMin:"1G",memMax:"2G",VMOptions:void 0,jarName:void 0,serverId:void 0}),m=I({serverName:void 0,version:void 0,enable:void 0,id:""}),f=q(),C=q({title:"\u81EA\u52A8\u626B\u63CF",value:!0});const v={required:D=>D?!0:"\u6B64\u9879\u4E0D\u80FD\u4E3A\u7A7A"};function M(){g("close")}function F(){let D={file:f.value[0],MCServer:m,MCSetting:d};console.log(D),B.request(N.mcServerUpload,D).then(r=>{alert(r.data)}).catch(r=>{alert(r.msg)}).finally(()=>{g("getServerList")})}return P(()=>{}),(D,r)=>(A(),x(Z,{onSubmit:r[8]||(r[8]=te(n=>F(),["prevent"])),"fast-fail":""},{default:l(()=>[e(K,{class:"fill-height",fluid:""},{default:l(()=>[e(G,{style:{width:"100%"}},{default:l(()=>[_e,e(p,null,{default:l(()=>[e(b,null,{default:l(()=>[s("\u670D\u52A1\u5668\u540D")]),_:1}),e(c,{counter:10,label:"\u670D\u52A1\u5668\u540D",required:"",variant:"underlined",rules:[v.required],modelValue:u(m).serverName,"onUpdate:modelValue":r[0]||(r[0]=n=>u(m).serverName=n)},null,8,["rules","modelValue"])]),_:1}),Ce,e(p,null,{default:l(()=>[e(y,null,{default:l(()=>[e(_,null,{default:l(()=>[e(X,{label:"\u8BF7\u9009\u62E9\u6574\u5408\u5305",required:"",variant:"underlined",rules:[v.required],modelValue:u(f),"onUpdate:modelValue":r[1]||(r[1]=n=>j(f)?f.value=n:f=n),accept:".zip"},null,8,["rules","modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(c,{label:"\u7248\u672C",required:"",variant:"underlined",modelValue:u(m).version,"onUpdate:modelValue":r[2]||(r[2]=n=>u(m).version=n),rules:[v.required]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(h,{color:"black"}),Fe,e(p,null,{default:l(()=>[e($,{items:[{title:"\u81EA\u52A8\u626B\u63CF",value:"true"},{title:"\u624B\u52A8\u914D\u7F6E",value:!1}],variant:"underlined",modelValue:u(C),"onUpdate:modelValue":r[3]||(r[3]=n=>j(C)?C.value=n:C=n),hint:u(C)?"\u8BF7\u786E\u4FDD\u6574\u5408\u5305\u6587\u4EF6\u5305\u542B.sh\u6216.bat\u542F\u52A8\u6587\u4EF6":"","persistent-hint":"",class:"select-box"},null,8,["modelValue","hint"])]),_:1}),ue(S("div",null,[e(p,null,{default:l(()=>[e(b,null,{default:l(()=>[s("Java\u8DEF\u5F84")]),_:1}),e(c,{counter:10,label:"JavaVersion",required:"",variant:"underlined",modelValue:u(d).javaVersion,"onUpdate:modelValue":r[4]||(r[4]=n=>u(d).javaVersion=n),rules:[v.required]},null,8,["modelValue","rules"])]),_:1}),e(p,null,{default:l(()=>[e(b,null,{default:l(()=>[s("\u5185\u5B58\u5206\u914D")]),_:1}),e(y,null,{default:l(()=>[e(_,null,{default:l(()=>[e(c,{label:"\u6700\u5C0F\u503C",required:"",variant:"underlined",modelValue:u(d).memMin,"onUpdate:modelValue":r[5]||(r[5]=n=>u(d).memMin=n),rules:[v.required]},null,8,["modelValue","rules"])]),_:1}),e(_,null,{default:l(()=>[e(c,{label:"\u6700\u5927\u503C",required:"",variant:"underlined",modelValue:u(d).memMax,"onUpdate:modelValue":r[6]||(r[6]=n=>u(d).memMax=n),rules:[v.required]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(b,null,{default:l(()=>[s("\u542F\u52A8\u53C2\u6570\u8BBE\u7F6E")]),_:1}),e(c,{counter:10,label:"VMOptions",variant:"underlined",modelValue:u(d).VMOptions,"onUpdate:modelValue":r[7]||(r[7]=n=>u(d).VMOptions=n)},null,8,["modelValue"])]),_:1})],512),[[ae,!u(C)]]),e(p,null,{default:l(()=>[e(y,null,{default:l(()=>[e(_,null,{default:l(()=>[e(U),e(E,{color:"blue",class:"float-right",type:"submit"},{default:l(()=>[s("\u4FDD\u5B58")]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(E,{color:"red",onClick:M},{default:l(()=>[s("\u53D6\u6D88")]),_:1}),e(U)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});const be={key:0},je=J({__name:"Instance",setup(W){let g=q(),d=ne(null),m=q(!1),f=q(!1);function C(){B.request(N.getServerList).then(i=>{g.value=i.data})}function v(){B.request(O.getStatus).then(i=>{f.value=i.data})}function M(){B.request(O.closeServer).then(i=>{alert(i.msg),v()})}function F(){B.request(O.openServer).then(i=>{alert(i.msg),v()})}function D(i){return i?"red":"grey"}function r(i){return i?"success":"error"}function n(i){switch(i){case"AddInstance":L(pe);break;case"UploadInstance":L(ce);break;default:m.value=!1,d.value=null}}function k(){m.value=!m.value,d.value=null}function L(i){d.value==i?(m.value=!1,d.value=null):d.value!=i&&m.value?d.value=i:(d.value=i,m.value=!m.value)}return P(()=>{C(),v()}),re(()=>{}),oe(()=>{}),(i,V)=>(A(),R("div",null,[e(T,{color:"lighten-5",flat:"",tile:""},{default:l(()=>[e(z,{density:"compact",color:"red"},{default:l(()=>[e(Q,null,{default:l(()=>[s("\u5B9E\u4F8B\u7BA1\u7406")]),_:1}),e(U)]),_:1}),e(ee,null,{default:l(()=>[e(y,null,{default:l(()=>[e(_,{cols:"12"},{default:l(()=>[e(E,{"x-large":"",class:"mx-5",variant:"outlined",onClick:V[0]||(V[0]=o=>n("AddInstance"))},{default:l(()=>[s("\u6DFB\u52A0\u5B9E\u4F8B")]),_:1}),e(E,{"x-large":"",class:"mx-5",variant:"outlined",onClick:V[1]||(V[1]=o=>n("UploadInstance"))},{default:l(()=>[s("\u4E0A\u4F20\u6574\u5408\u5305")]),_:1}),e(E,{"x-large":"",class:"mx-5",variant:"outlined",onClick:V[2]||(V[2]=o=>n("ScanInstance"))},{default:l(()=>[s("\u626B\u63CF\u5B9E\u4F8B")]),_:1})]),_:1})]),_:1}),e(me,null,{default:l(()=>[u(m)?(A(),R("div",be,[(A(),x(de(u(d)),{onClose:V[3]||(V[3]=o=>k()),onGetServerList:V[4]||(V[4]=o=>C())},null,32))])):Y("",!0)]),_:1})]),_:1})]),_:1}),e(T,{class:"mt-5",color:"#f3f3f3",flat:""},{default:l(()=>[e(y,{class:"mx-auto"},{default:l(()=>[e(_,{cols:"12"},{default:l(()=>[e(y,{justify:"start"},{default:l(()=>[(A(!0),R(se,null,ie(u(g),(o,a)=>(A(),x(_,{key:a,md:"4",sm:"12"},{default:l(()=>[e(T,null,{default:l(()=>[e(z,{density:"comfortable",color:D(o.enable)},{default:l(()=>[e(Q,null,{default:l(()=>[s(w(o.serverName),1)]),_:2},1024),e(U)]),_:2},1032,["color"]),e(le,null,{default:l(()=>[e(G,null,{default:l(()=>[e(p,null,{default:l(()=>[s("\u7248\u672C\uFF1A"+w(o.version),1)]),_:2},1024),e(p,null,{default:l(()=>[s("\u670D\u52A1\u5668\u72B6\u6001\uFF1A "),e(H,{class:"ma-2",color:r(o.enable),variant:"outlined",label:""},{default:l(()=>[s(w(o.enable?"\u53EF\u7528":"\u505C\u7528"),1)]),_:2},1032,["color"]),e(H,{class:"ma-2",color:r(u(f)&&o.enable),variant:"outlined",label:""},{default:l(()=>[s(w(u(f)&&o.enable?"\u8FD0\u884C\u4E2D":"\u5DF2\u5173\u95ED"),1)]),_:2},1032,["color"])]),_:2},1024),e(h),e(p,null,{default:l(()=>[e(E,{onClick:t=>i.$router.push({name:"InstanceManage",params:{id:o.id}}),style:{"padding-left":"0px"}},{default:l(()=>[s("\u7BA1\u7406")]),_:2},1032,["onClick"]),e(E,{disabled:!o.enable,onClick:V[5]||(V[5]=t=>i.$router.push({name:"Command"}))},{default:l(()=>[s("\u7EC8\u7AEF")]),_:2},1032,["disabled"]),e(E,{disabled:!(o.enable&&!u(f)),onClick:V[6]||(V[6]=t=>F())},{default:l(()=>[s("\u5F00\u542F")]),_:2},1032,["disabled"]),e(E,{disabled:!(o.enable&&u(f)),onClick:V[7]||(V[7]=t=>M())},{default:l(()=>[s("\u5173\u95ED")]),_:2},1032,["disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{je as default};
